<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Workflow tips · Cleaner.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://TheRoniOne.github.io/Cleaner.jl/man/workflow_tips/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Cleaner.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Guide</span><ul><li><a class="tocitem" href="../first_steps/">First steps</a></li><li><a class="tocitem" href="../name_changing/">A name-changing help</a></li><li><a class="tocitem" href="../dirt_removal/">Getting the dirt out</a></li><li class="is-active"><a class="tocitem" href>Workflow tips</a><ul class="internal"><li><a class="tocitem" href="#Starting-the-workflow"><span>Starting the workflow</span></a></li><li><a class="tocitem" href="#Looking-for-performance"><span>Looking for performance</span></a></li><li><a class="tocitem" href="#Looking-for-convenience"><span>Looking for convenience</span></a></li><li><a class="tocitem" href="#Final-touches"><span>Final touches</span></a></li></ul></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../lib/types/">Types</a></li><li><a class="tocitem" href="../../lib/functions/">Functions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Guide</a></li><li class="is-active"><a href>Workflow tips</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Workflow tips</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/TheRoniOne/Cleaner.jl/blob/master/docs/src/man/workflow_tips.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Workflow-tips"><a class="docs-heading-anchor" href="#Workflow-tips">Workflow tips</a><a id="Workflow-tips-1"></a><a class="docs-heading-anchor-permalink" href="#Workflow-tips" title="Permalink"></a></h1><h2 id="Starting-the-workflow"><a class="docs-heading-anchor" href="#Starting-the-workflow">Starting the workflow</a><a id="Starting-the-workflow-1"></a><a class="docs-heading-anchor-permalink" href="#Starting-the-workflow" title="Permalink"></a></h2><p>Usually you will start by having a <a href="https://github.com/JuliaData/Tables.jl">Tables.jl</a> implementation loaded with the data you want to work with, so your next step could be to use a non-mutating <code>Cleaner</code> function to start your <code>Cleaner</code> workflow.</p><p>&quot;&quot;&quot;jldoctest start julia&gt; using DataFrames: DataFrame</p><p>julia&gt; using Cleaner</p><p>julia&gt; df = DataFrame(&quot; Some bad Name&quot; =&gt; [missing, missing, missing], &quot;Another<em>weird name &quot; =&gt; [1, &quot;x&quot;, 3]) 3×2 DataFrame  Row │  Some bad Name  Another</em>weird name      │ Missing         Any ─────┼─────────────────────────────────────    1 │        missing  1    2 │        missing  x    3 │        missing  3</p><p>julia&gt; ct = polish<em>names(df) ┌───────────────┬────────────────────┐ │ some</em>bad<em>name │ another</em>weird_name │ │       Missing │                Any │ ├───────────────┼────────────────────┤ │       missing │                  1 │ │       missing │                  x │ │       missing │                  3 │ └───────────────┴────────────────────┘</p><p>&quot;&quot;&quot;</p><p>After that, you can decide whether to continue using non-mutating functions or start using mutating ones. &quot;&quot;&quot;jldoctest julia&gt; ct |&gt; compact<em>columns |&gt; reinfer</em>schema ┌────────────────────┐ │ another<em>weird</em>name │ │   U{Int64, String} │ ├────────────────────┤ │                  1 │ │                  x │ │                  3 │ └────────────────────┘</p><p>julia&gt; ct ┌───────────────┬────────────────────┐ │ some<em>bad</em>name │ another<em>weird</em>name │ │       Missing │                Any │ ├───────────────┼────────────────────┤ │       missing │                  1 │ │       missing │                  x │ │       missing │                  3 │ └───────────────┴────────────────────┘</p><p>julia&gt; ct |&gt; compact<em>columns! |&gt; reinfer</em>schema! ┌────────────────────┐ │ another<em>weird</em>name │ │   U{Int64, String} │ ├────────────────────┤ │                  1 │ │                  x │ │                  3 │ └────────────────────┘</p><p>julia&gt; ct ┌────────────────────┐ │ another<em>weird</em>name │ │   U{Int64, String} │ ├────────────────────┤ │                  1 │ │                  x │ │                  3 │ └────────────────────┘</p><p>&quot;&quot;&quot;</p><p>Depending on what you are trying to do, one could be a better option than the other. For example, if you need to keep copies of the data in order to do different transformations between copies, using non-mutating functions would be a better fit, whereas if you just want to do a series of linear transformations on your data and continue processing it after finishing the cleaning, using mutating functions would a better option.</p><p>You could also mix and match mutating and non-mutating <code>Cleaner</code> functions to better fit your needs, as all non-mutating <code>Cleaner</code> functions work on any <a href="https://github.com/JuliaData/Tables.jl">Tables.jl</a> implementation and return a <code>CleanTable</code>, while all mutating <code>Cleaner</code> functions work on a <code>CleanTable</code> and return a <code>CleanTable</code> which also is a Tables.jl implementation.</p><p>There is also the option to build a <code>CleanTable</code> from any Tables.jl implementation to start a your workflow by mutating even the data stored in the original table, as the <code>CleanTable</code> constructor has a keyword argument <code>copycols</code> that can be set to false to use the original columns directly at your own risk.</p><p>&quot;&quot;&quot;jldoctest start julia&gt; ct = CleanTable(df; copycols=false) |&gt; polish<em>names! |&gt; compact</em>columns! ┌────────────────────┐ │ another<em>weird</em>name │ │                Any │ ├────────────────────┤ │                  1 │ │                  x │ │                  3 │ └────────────────────┘</p><p>julia&gt; ct.another<em>weird</em>name[2] = 4 4</p><p>julia&gt; ct ┌────────────────────┐ │ another<em>weird</em>name │ │                Any │ ├────────────────────┤ │                  1 │ │                  4 │ │                  3 │ └────────────────────┘</p><p>julia&gt; df 3×2 DataFrame  Row │  Some bad Name  Another_weird name      │ Missing         Any ─────┼─────────────────────────────────────    1 │        missing  1    2 │        missing  4    3 │        missing  3</p><p>&quot;&quot;&quot;</p><p>The complete oposite approach would be to use a function from the ROT (returning original type) variants (e.g. polish<em>names</em>ROT) that take as input any table, does it&#39;s transformation on a copy of it and then returns a new table of the same type of the source table.</p><p>&quot;&quot;&quot;jldoctest start julia&gt; df |&gt; polish<em>names</em>ROT 3×2 DataFrame  Row │ some<em>bad</em>name  another<em>weird</em>name      │ Missing        Any ─────┼───────────────────────────────────    1 │       missing  1    2 │       missing  4    3 │       missing  3</p><p>&quot;&quot;&quot;</p><h2 id="Looking-for-performance"><a class="docs-heading-anchor" href="#Looking-for-performance">Looking for performance</a><a id="Looking-for-performance-1"></a><a class="docs-heading-anchor-permalink" href="#Looking-for-performance" title="Permalink"></a></h2><p>When trying to avoid most of the extra allocations while working with <code>Cleaner</code>, you should start by creating a <code>CleanTable</code> specifying <code>copycols=false</code> to use the original columns directly on the new <code>CleanTable</code> instead of having a non-mutating <code>Cleaner</code> function making copies of them to use on the <code>CleanTable</code> it builds first.</p><pre><code class="language-julia-repl">julia&gt; nt = (A = [missing, missing, missing], B = [4, &#39;x&#39;, 6])
(A = [missing, missing, missing], B = Any[4, &#39;x&#39;, 6])

julia&gt; ct = CleanTable(nt; copycols=false)
┌─────────┬─────┐
│       A │   B │
│ Missing │ Any │
├─────────┼─────┤
│ missing │   4 │
│ missing │   x │
│ missing │   6 │
└─────────┴─────┘

</code></pre><p>Now that you have a <code>CleanTable</code> you should continue by using <code>Cleaner</code> mutating functions, as they will modify the same <code>CleanTable</code> passed as input in place avoiding having to allocate new <code>CleanTable</code>s while also avoiding copying the underlying columns data.</p><pre><code class="language-julia-repl">julia&gt; compact_columns!(ct)
┌─────┐
│   B │
│ Any │
├─────┤
│   4 │
│   x │
│   6 │
└─────┘


julia&gt; row_as_names!(ct, 2)
┌─────┐
│   x │
│ Any │
├─────┤
│   6 │
└─────┘


julia&gt; ct
┌─────┐
│   x │
│ Any │
├─────┤
│   6 │
└─────┘


julia&gt; nt
(A = [missing, missing, missing], B = Any[6])
</code></pre><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Note that when using the original columns to build a <code>CleanTable</code> and using mutating functions in it, the changes also happen on the source potentially corrupting it.</p><p>If you do need to use the original source after applying mutating <code>Cleaner</code> functions, you can always just use a non-mutating  <code>Cleaner</code> function first to have it create a <code>CleanTable</code> with copied columns first and do its transformation on it and then  continue by using mutating <code>Cleaner</code> functions for performance.</p></div></div><h2 id="Looking-for-convenience"><a class="docs-heading-anchor" href="#Looking-for-convenience">Looking for convenience</a><a id="Looking-for-convenience-1"></a><a class="docs-heading-anchor-permalink" href="#Looking-for-convenience" title="Permalink"></a></h2><p>TODO</p><h2 id="Final-touches"><a class="docs-heading-anchor" href="#Final-touches">Final touches</a><a id="Final-touches-1"></a><a class="docs-heading-anchor-permalink" href="#Final-touches" title="Permalink"></a></h2><p>TODO</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../dirt_removal/">« Getting the dirt out</a><a class="docs-footer-nextpage" href="../../lib/types/">Types »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 10 November 2021 02:24">Wednesday 10 November 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
